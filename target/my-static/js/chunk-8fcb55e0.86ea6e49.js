(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8fcb55e0"],{"0fb9":function(t,e,i){"use strict";var a=i("2c59");i.n(a).a},"1bac":function(t,e,i){"use strict";var a={props:{showLoading:{type:Boolean,default:!1}}},s=(i("9297"),i("2877")),n=Object(s.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}],staticClass:"pageLoading"},[i("div",{staticClass:"ui-showPageLoading-gif"})])},[],!1,null,null,null);n.options.__file="pageLoading.vue",e.a=n.exports},"1ef4":function(t,e,i){"use strict";i("ac6a"),i("f751");var a=i("6318"),s=(i("cec2"),{props:["options","list"],data:function(){return{appView:null,ticking:!1,timer:null,default:{scrollEle:"appView",ele:"pic-lazyLoad",time:100,complete:!0,position:{top:0,right:0,bottom:0,left:0}}}},created:function(){Object.assign(this.default,this.options)},mounted:function(){this.appView=document.getElementById(this.default.scrollEle)},watch:{list:function(){var t=this;setTimeout(function(){t.startLoad()},0)}},methods:{getClientRect:function(t,e){var i=t.getBoundingClientRect(),a=t.offsetWidth,s=t.offsetHeight,n=window.innerWidth,o=window.innerHeight,c=!(i.right-e.left<=0&&i.left+a-e.left<=0||i.left+e.right>=n&&i.right+e.right>=a+n),r=!(i.bottom-e.top<=0&&i.top+s-e.top<=0||i.top+e.bottom>=o&&i.bottom+e.bottom>=s+o);return 0!=t.width&&0!=t.height&&c&&r},scrollLoad:function(){var t=this,e=Array.prototype.slice.apply(this.appView.querySelectorAll("."+this.default.ele+"[data-src]"));!e.length&&this.default.complete?(cancelAnimationFrame(this.timer),window.removeEventListener("scroll",this.scrollImg,!!a.a.isPassive()&&{passive:!0})):(this.ticking=!1,e.forEach(function(e){!e.dataset.LazyLoadImgState&&t.getClientRect(e,t.default.position)&&t.loadImg(e)}))},scrollImg:function(){this.ticking||(this.ticking=!0,this.timer=requestAnimationFrame(this.realFunc))},realFunc:function(){this.scrollLoad()},startLoad:function(){this.scrollLoad(),window.addEventListener("scroll",this.scrollImg,!!a.a.isPassive()&&{passive:!0})},loadImg:function(t){t.dataset.LazyLoadImgState="start";var e=t.dataset.src;if(e){var i=new Image;i.src=e,i.addEventListener("load",function(){setTimeout(function(){t.style.backgroundImage="url("+e+")",t.style.backgroundSize="100% auto",delete t.dataset.src,t.dataset.LazyLoadImgState="success",t.classList.add("successImg")},150)},!1),i.addEventListener("error",function(){delete t.dataset.src,t.dataset.LazyLoadImgState="error"},!1)}else delete t.dataset.src}},beforeDestroy:function(){cancelAnimationFrame(this.timer),window.removeEventListener("scroll",this.scrollImg,!1)}}),n=i("2877"),o=Object(n.a)(s,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"lazyLoad"},[t._t("default")],2)},[],!1,null,null,null);o.options.__file="lazyLoad.vue",e.a=o.exports},"2c59":function(t,e,i){},8996:function(t,e,i){"use strict";var a=i("a070");i.n(a).a},9297:function(t,e,i){"use strict";var a=i("e878");i.n(a).a},a070:function(t,e,i){},c626:function(t,e,i){"use strict";var a=i("f121"),s={props:{pic:{type:String,default:a.a.staticPath+"/webapp-static/images/ui-empty-basic.png"},content:{type:String,default:"暂时没有任何数据呢"}}},n=(i("0fb9"),i("2877")),o=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-empty"},[i("img",{staticClass:"ui-empty-pic",attrs:{src:t.pic}}),i("p",{staticClass:"c9"},[t._v(t._s(t.content))])])},[],!1,null,null,null);o.options.__file="ui-empty.vue",e.a=o.exports},cec2:function(t,e){!function(){for(var t=0,e=["webkit","moz"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),a=Math.max(0,16.7-(i-t)),s=window.setTimeout(function(){e(i+a)},a);return t=i+a,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()},d784:function(t,e,i){"use strict";var a=i("327d"),s=i("6318"),n={props:{backFn:{default:null,type:Function},title:{default:"",type:String},isBorder:{default:!0,type:Boolean},isShowHeader:{default:!1,type:Boolean}},computed:{showHeader:function(){return s.a.isApp()?0==s.a.query("hideHead")&&s.a.getVersion()<5320:!s.a.weixin()&&!s.a.nativeQQ()&&(this.isShowHeader||!0)}},methods:{backAction:function(){this.backFn&&"function"==typeof this.backFn?this.backFn():s.a.isApp()?a.a.back():this.$router.back()}}},o=i("2877"),c=Object(o.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showHeader?i("div",{staticClass:"ui-header",class:{"ui-header-border":t.isBorder}},[i("div",{staticClass:"ui-header-back",on:{click:t.backAction}},[i("div",{staticClass:"ui-header-back_btn"})]),i("h4",{staticClass:"ui-header-title"},[t._v(t._s(t.title))]),t._t("default")],2):t._e()},[],!1,null,null,null);c.options.__file="header.vue",e.a=c.exports},e12a:function(t,e,i){"use strict";i.r(e);var a=i("d784"),s=i("1bac"),n=i("1ef4"),o=i("6318"),c=i("371a"),r=i("c626"),l=(i("cec2"),{data:function(){return{isBorder:!0,title:"常购清单",pageView:!1,currentPage:1,totalPage:1,showLoading:!1,list:[],timer:null,isScrollLoad:!1}},components:{AppHeader:a.a,PageLoading:s.a,LazyLoad:n.a,UIEmpty:r.a},methods:{getBuyList:function(t){var e,i=this,a=this.currentPage;(e={type:"GET",data:{pageNo:a,pageSize:10}},Object(c.a)("/api/my/behavior/record",e)).then(function(e){i.$hideLoading();var s=e.data;0==e.code&&s?(i.pageView=!0,i.totalPage=s.totalPage,1<a&&setTimeout(function(){i.showLoading=!1,i.isScrollLoad=!1},1e3),i.list=1==t?i.list.concat(s.data||[]):s.data||[]):(1<a&&setTimeout(function(){i.isScrollLoad=!1},1e3),i.$toast(e.message))})},addBuyListCart:function(t){var e,i=this,a=o.a.getSessionId();(e={type:"POST",data:{sessionId:a,num:1,mpId:t.mpId}},Object(c.a)("/api/cart/addItem",e)).then(function(t){var e=t.data;0==t.code&&e?i.$toast("添加成功"):i.$toast(t.message)})},scrollLoadList:function(){var t=this,e=window.innerHeight,i=document.documentElement.scrollTop||document.body.scrollTop,a=document.documentElement.offsetHeight;this.isScrollLoad||(this.isScrollLoad=!0,this.timer=requestAnimationFrame(function(){a<=e+i&&t.list.length<t.totalPage&&(t.showLoading=!0,t.currentPage+=1,t.getBuyList(1)),t.isScrollLoad=!1}))}},created:function(){this.$showLoading(),this.getBuyList(),window.addEventListener("touchmove",this.scrollLoadList,!!o.a.isPassive()&&{passive:!0})},beforeDestroy:function(){cancelAnimationFrame(this.timer),window.removeEventListener("touchmove",this.scrollLoadList,!!o.a.isPassive()&&{passive:!0})}}),d=(i("8996"),i("2877")),u=Object(d.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pageView"},[i("AppHeader",{attrs:{title:t.title,isBorder:t.isBorder}}),i("div",{staticClass:"scroll-view-wrapper",class:{visibility:t.pageView},attrs:{id:"my-buy-list-scroll"}},[i("div",{staticClass:"my-buy-view"},[i("div",{staticClass:"my-buy-list"},[i("LazyLoad",{attrs:{list:t.list,options:{ele:"pic-lazyLoad",scrollEle:"my-buy-list-scroll"}}},t._l(t.list,function(e,a){return i("div",{key:a,staticClass:"my-buy-item ui-bottom-line"},[i("div",{staticClass:"my-buy-item-pic pic-lazyLoad",attrs:{"data-src":e.url160x160}}),i("div",{staticClass:"my-buy-item-des"},[i("h4",{staticClass:"font"},[t._v(t._s(e.name))]),i("div",{staticClass:"my-by-item-info"},[i("span",{staticClass:"font ff6900"},[t._v("¥"+t._s(t._f("price")(e.price)))]),i("p",[t._v("购买"),i("strong",{staticClass:"ff6900"},[t._v(t._s(e.num)+"次")])])])]),i("div",{staticClass:"my-buy-item-cart",on:{click:function(i){t.addBuyListCart(e)}}},[i("i",{staticClass:"icon"})])])}),0)],1),i("PageLoading",{attrs:{showLoading:t.showLoading}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.pageView&&!t.list.length,expression:"pageView && !list.length"}],staticClass:"ui-empty-wrapper"},[i("UIEmpty")],1)])],1)},[],!1,null,null,null);u.options.__file="list.vue",e.default=u.exports},e878:function(t,e,i){}}]);